<div class="container">
    <div class="row gy-3 m-3">
        <div class="row">
            {% for product in products %}
            <div id="card-product" class="col-sm-6 col-md-4 col-lg-3">
                <div  class="card text-center h-100">
                    <a id="card-link" href="{% url 'product_details_slug' product.slug %}">
                        <div class="card-body">
                            <div class="m-3">
                                <img src="{{ product.main_image.url }}" class="img-fluid" alt="main_image">    
                            </div>
                        </div>
                        <div class="card-footer mt-auto">
                            <h6 class="card-title">{{ product.name }}</h6>
                            <h5 id="card-price" class="card-title">{{ product.price }} р.</h5>
                            {% if user.is_authenticated %} 
                            <a><form action="{% url 'cart_add' product.id %}" class="mt-auto" method="post">
                                {% csrf_token %}
                                <input type="hidden" value="1" min="1" max="100" name="quantity" id="id_quantity">
                                <input type="submit" class="btn btn-warning" value="Добавить в корзину">
                            </form>
                            </a>
                            {% else %}
                            <a href="{% url 'login_user' %}" class="btn btn-warning">Добавить в корзину</a>
                            {% endif %}
                        </div>
                    </a>
                </div>  
            </div>  
            {% endfor %}                  
        </div>                
    </div>
</div>